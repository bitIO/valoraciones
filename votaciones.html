<head>
  <title>Leaderboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <div class="header">
    <div class="containerFlex">
     <section class="flex-item-logo">
       <img src="/logo.png" class="logo">
     </section>
     <section class="flex-item-title">
        <h2>Votaciones para charlas de Codemotion</h2>
     </section>
     <section class="flex-item-auth">
      {{#if isLogged }}
        <img src="{{ avatar }}" class="avatar" alt="You">
      {{/if}}
      {{> loginButtons}} 
     </section>
     
    </div>
  </div>
  
  <div class="container-fluid">
    {{> sAlert}}
    {{#if isLogged }}
      {{#if hasNotVoted }}
        {{> leaderboard}}       
      {{/if}}
      
    {{else}}
      {{> instructions }}
    {{/if}}
  </div>
  
</body>

<template name="navbar">
  {{# if isAdmin }}
    <section class="admin">
      {{#if notImportedYet}}
        <input type="file" id="csv-file" name="files"/>
        <button type="submit" id="import" class="btn-small">Import Talks</button>
      {{/if}}
    </section>
  {{/if}}     
</template>
<template name="ControlPanel">
  <div class="containerFlex">
    <div class="controlButtons">
      {{> affinityFilter }}
      {{> byTagFilter }}
    </div>
    <div class="controlVote">
      <span><i class="vote fa fa-thumbs-o-up fa-5x"></i></span>
    </div>
  </div>
  
</template>
<template name="leaderboard">
   {{#if isLogged }}
    {{> navbar}}
    {{> ControlPanel }}
    {{> reactiveTable class="table table-bordered table-hover" settings=settings }}  
   {{/if}}
</template>

<template name="thumbsUp">
    <input class="vote increment" type="number" min="0" max="10" data-talk="{{ talkId }}">
</template>
<template name="notRelated">
  <span><i class="notRelated fa fa-times-circle fa-3x"></i></span>
</template>

<template name="affinityFilter">
    <button class="btn btn-primary btn-sm clickable" id="btnAffinity">{{ title }} {{ results }}</button>
</template>
<template name="byTagFilter">
    <div class="containerFlex spaced">
       {{# each tags }}
          <div class="flex-item">
            <button class="tag  btn btn-primary btn-sm byTag" data-current="{{ this }}">{{ this }}</button>
          </div>
      {{/each}}
    </div>
   
</template>
<template name="instructions">
   
  <div class="container">
    <section>
   <h2>Preparado para una nueva edición de Codemotion ?</h2>
      <p>Hemos preparado esta herramienta rápida de guerrilla para que podáis votar qué charlas os gustaría ver en el Codemotion. Podréis votar hasta el <b>19 de Julio a las 23:00h</b></p>
      
        <ol class="justify">
        <li><p>Autentícate con tu cuenta de Meetup ( Debes ser miembr@ de HTML5 Spain para poder votar)</p></li>
        <li><p>Una vez autenticado verás el listado completo de las Charlas. Usa los botones para un filtrado. Fíjate que los resultados están paginados, pudiendo configurar tu mismo cúantos quieres ver de una tacada.</p>
        </li>
        <li><p>En la casilla <b>ThumbsUp</b> introduce un valor entre 0 y 10. Repite el proceso con aquellas charlas que quieras valorar.</p></li>
        <li><p>Cuando hayas acabado de valorar las charlas que más te gusten , pulsa en el botón <span><i class="fa fa-thumbs-o-up fa-3x" alt="Botón de votar"></i></span></p></li>
        <li><p>Una vez recogido tu votos para las charlas que elegíste, te aparecerá una ventana de confirmación</p></li>
      </ol>       
    </section> 
    <section>
      <h2>FAQ</h2>
      <ul>
        <li><p><b>¿Cuántas charlas puedo votar?</b> -> Las que quieras, cuantas más votes mejor, porque la confección de la Agenda estará más ajustada a lo que hayan votado todas las comunidades</p></li>
        <li><p><b>¿ Cómo y quien decide qué charlas saldrán en el CodeMotion?</b> -> Evidentemente, lo decidirá Codemotion. Las comunidades sólo hacemos de intermediarios para reflejar el voto de cada una</p></li>
        <li><p><b>¿ Cuántas veces puedo votar ?</b> -> Tus votos deberán estar reflejados en una única sesión , por lo que evita dar al <span><i class="fa fa-thumbs-o-up fa-3x" alt="Botón de votar"></i></span> demasiado rápido...</p></li>
        <li>
        <p><b>¿ Cómo salen las cuentas ?</b> -> Al final tenemos que proyectar 100 puntos , que son los que transmitiremos al equipo de Codemotion</p>
          <ol>
            <li>Se suman los votos que obtiene cada charla y se dividen entre el número total de votos de todas las charlas</li>
            <li>Con esa proporción ordenamos por el valor más alto</li>
            <li>Con esto tendríamos un Ranking de las 10 más populares. Si hubiera más de 10 , por tema de empates , se proyectará todos aquellos empates proporcionalmente a la suma que excede 10 charlas</li>
            <li>De esas 10 , normalizaremos para proyectar a los 100 puntos</li>
          </ol>
        </li>
        <li>Desgraciadamente , nos encantaría tener un método bien estudiado, pero lo hemos tenido que hacer deprisa y corriendo . El feedback que tengáis lo trasladaremos a la organización del CodeMotion y tomaremos nota para tratar de mejorarlo en una próxima ocasión</li>
        <li>¿ Cómo lo habéis hecho ? -> Echa un vistazo a <a href="https://github.com/ntkog/valoraciones/tree/alternative">este repo</a></li>
      </ul>
      
    </section>
  </div>
</template>
